import{_ as s,o as a,c as n,a as l}from"./app.57a3dbd1.js";const C=JSON.parse('{"title":"sonic-uiautomator2-python-client","description":"","frontmatter":{"contributors":["ZhouYixun"]},"headers":[{"level":2,"title":"æœ¬ä»“åº“è´¡çŒ®è€…","slug":"æœ¬ä»“åº“è´¡çŒ®è€…","link":"#æœ¬ä»“åº“è´¡çŒ®è€…","children":[]},{"level":2,"title":"ä»‹ç»","slug":"ä»‹ç»","link":"#ä»‹ç»","children":[]},{"level":2,"title":"å¦‚ä½•ä½¿ç”¨","slug":"å¦‚ä½•ä½¿ç”¨","link":"#å¦‚ä½•ä½¿ç”¨","children":[{"level":3,"title":"è‡´è°¢","slug":"è‡´è°¢","link":"#è‡´è°¢","children":[]}]}],"relativePath":"supc/re-supc.md","lastUpdated":1716537034000}'),o={name:"supc/re-supc.md"},p=l(`<h1 id="sonic-uiautomator2-python-client" tabindex="-1">sonic-uiautomator2-python-client <a class="header-anchor" href="#sonic-uiautomator2-python-client" aria-hidden="true">#</a></h1><p>æœ¬æ–‡ä¸ºsonic-uiautomator2-python-clientçš„ä»‹ç»ä¸åŸç†ç®€è¿°ã€‚ ğŸ‘‰<a href="https://github.com/SonicCloudOrg/sonic-uiautomator2-python-client" target="_blank" rel="noreferrer">Githubåœ°å€</a></p><div style="display:flex;"><img src="https://img.shields.io/github/stars/SonicCloudOrg/sonic-uiautomator2-python-client?style=social"><img style="margin-left:10px;" src="https://img.shields.io/github/forks/SonicCloudOrg/sonic-uiautomator2-python-client?style=social"><img style="margin-left:10px;" src="https://img.shields.io/pypi/v/sonic-uia2-client"><img style="margin-left:10px;" src="https://img.shields.io/pypi/dm/sonic-uia2-client"></div><h2 id="æœ¬ä»“åº“è´¡çŒ®è€…" tabindex="-1">æœ¬ä»“åº“è´¡çŒ®è€… <a class="header-anchor" href="#æœ¬ä»“åº“è´¡çŒ®è€…" aria-hidden="true">#</a></h2><a href="https://github.com/SonicCloudOrg/sonic-uiautomator2-python-client/graphs/contributors"><img src="https://contrib.rocks/image?repo=SonicCloudOrg/sonic-uiautomator2-python-client"></a><h2 id="ä»‹ç»" tabindex="-1">ä»‹ç» <a class="header-anchor" href="#ä»‹ç»" aria-hidden="true">#</a></h2><p>ç›®å‰Sonicçš„è‡ªåŠ¨åŒ–ä¾èµ–äº† <a href="https://github.com/appium/appium-uiautomator2-server" target="_blank" rel="noreferrer">appium-uiautomator2-server</a>ï¼Œä½†æ˜¯æˆ‘ä»¬ç»•å¼€äº†Appium Serveræ¥ç›´æ¥ä½¿ç”¨ã€‚</p><p>è€ƒè™‘åˆ°æœ‰IDEç”¨æˆ·æƒ³ç›´æ¥è°ƒç”¨uiaè¿œç¨‹urlçš„ä½¿ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬è¿›è¡Œäº†é¢„ç ”ï¼Œå‘ç°Githubä¸Šåªçœ‹åˆ°ä¸€ä¸ªPythonç»•å¼€Appium Serverå•ç‹¬è·Ÿappium-uiautomator2-serveräº¤äº’çš„é¡¹ç›® <a href="https://github.com/xsoloking/appium-uiautomator2-client" target="_blank" rel="noreferrer">appium-uiautomator2-client</a>ï¼Œä½†æ˜¯æœªèƒ½å…¼å®¹æœ€æ–°appium-uiautomator2-server v5.x APIçš„baseUrlï¼Œå¹¶ä¸”æ²¡æœ‰å‘å¸ƒåœ¨pypiã€‚å°è¯•è¿‡è·Ÿä½œè€…æ¥è§¦ä½†æ˜¯æ²¡æœ‰å›å¤ï¼Œäºæ˜¯å†³å®šç»„ç»‡è‡ªå·±å†™ä¸€ä¸ªç»´æŠ¤ã€‚</p><p>Javaç‰ˆæœ¬çš„å¯ä»¥çœ‹æˆ‘ä»¬ç»„ç»‡è‡ªå·±ç»´æŠ¤çš„ <a href="https://github.com/SonicCloudOrg/sonic-driver-core" target="_blank" rel="noreferrer">sonic-driver-core</a>ã€‚</p><h2 id="å¦‚ä½•ä½¿ç”¨" tabindex="-1">å¦‚ä½•ä½¿ç”¨ <a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨" aria-hidden="true">#</a></h2><ol><li>å®‰è£…uia2 server</li></ol><blockquote><p>ä½ éœ€è¦å…ˆå®‰è£… <code>sonic-appium-uiautomator2-server.apk</code> å’Œ <code>sonic-appium-uiautomator2-server-test.apk</code> ï¼Œå¯ä»¥ä»è¿™é‡Œä¸‹è½½ <a href="https://github.com/SonicCloudOrg/sonic-agent/tree/main/plugins" target="_blank" rel="noreferrer">è¿™é‡Œ</a>.</p><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå·±æ„å»º <a href="https://github.com/SonicCloudOrg/sonic-appium-uiautomator2-server" target="_blank" rel="noreferrer">å‰å¾€è¿™é‡Œ</a></p></blockquote><ol start="2"><li>å¯åŠ¨ uiautomator2 server</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">adb</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shell</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">am</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">instrument</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-w</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">io.appium.uiautomator2.server.test/androidx.test.runner.AndroidJUnitRunner</span></span>
<span class="line"></span></code></pre></div><ol start="3"><li>è½¬å‘ç«¯å£</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">adb</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">forward</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tcp:</span><span style="color:#F78C6C;">6790</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tcp:</span><span style="color:#F78C6C;">6790</span></span>
<span class="line"></span></code></pre></div><ol start="4"><li>å®‰è£…ä¾èµ–</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">pip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-U</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sonic-uia2-client</span></span>
<span class="line"></span></code></pre></div><ol start="5"><li>ç¼–å†™ä½ çš„è„šæœ¬</li></ol><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> common</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">models </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> AndroidSelector</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> uia2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">driver </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> AndroidDriver</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> os</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TestDriver</span><span style="color:#89DDFF;">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">__init__</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">uia_url</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://localhost:6790</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">adb_serial_num</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">DAISKnlasido</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">package_name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">com.android.settings</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_demo</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;"># launch App</span></span>
<span class="line"><span style="color:#A6ACCD;">        os</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">system</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#82AAFF;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">adb -s </span><span style="color:#F78C6C;">{}</span><span style="color:#C3E88D;"> shell monkey -p </span><span style="color:#F78C6C;">{}</span><span style="color:#C3E88D;"> -c android.intent.category.LAUNCHER 1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">format</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">adb_serial_num</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">                                                                                        </span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">package_name</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;"># connect remote uia2 server</span></span>
<span class="line"><span style="color:#A6ACCD;">        driver </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">AndroidDriver</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">uia_url</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        p </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> driver</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get_page_source</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">p</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        e </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> driver</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">find_element</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">AndroidSelector</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">XPATH</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">//*[@text=&#39;è®¾ç½®&#39;]</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> e </span><span style="color:#89DDFF;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">None:</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">e</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get_text</span><span style="color:#89DDFF;">())</span></span>
<span class="line"><span style="color:#A6ACCD;">            e</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send_keys</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Hello</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><h3 id="è‡´è°¢" tabindex="-1">è‡´è°¢ <a class="header-anchor" href="#è‡´è°¢" aria-hidden="true">#</a></h3><ul><li><a href="https://github.com/appium/appium-uiautomator2-server" target="_blank" rel="noreferrer">appium/appium-uiautomator2-server</a></li><li><a href="https://github.com/xsoloking/appium-uiautomator2-client" target="_blank" rel="noreferrer">xsoloking/appium-uiautomator2-client</a></li></ul>`,22),e=[p];function t(r,c,i,y,D,F){return a(),n("div",null,e)}const A=s(o,[["render",t]]);export{C as __pageData,A as default};
